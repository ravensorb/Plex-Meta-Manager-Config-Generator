external_templates:
  pmm: templates

templates:
  tplCommonCollection:
    optional:
    - collection
    - list
    move_prefix: The
    sync_mode: sync
    collection_order: release
    url_poster: <<poster>>
  
  tplTVDBCollection:
    optional:
    - collection
    - list
    - show
    - network
    tvdb_show: <<show>>
    tvdb_show_details: <<show>>
    tvdb_list: <<list>>
    tvdb_list_details: <<list>>
    sort_title: <<collection_name>>
  
  tplTMDBCollection:
    optional:
    - collection
    - list
    - show
    - network
    tmdb_collection_details: <<collection>>
    tmdb_show: <<show>>
    tmdb_show_details: <<show>>
    tmdb_list: <<list>>s
    tmdb_list_details: <<list>>
    sort_title: <<collection_name>>

collections:
  "{{ item.title }}":
    variables: { collection: "{{ item | getTmDbCollectionId(true) | join(", ") }}", show: "{{ item | getCollectionGuidsByName("tvdb") | join(", ") }}", poster: https://theposterdb.com/api/assets/ }
    template: [ { name: tplCommonCollection }, { name: tplTVDBCollection } ]
    summary: {{ item.title }}
    # tpdb: {{ item | generateTpDbSearchUrl }}
    # tmdb: https://www.themoviedb.org/search/collection?query={{ item.title | add_prepostfix(postfix=" Collection") | quote | urlencode}}
    # tvdb: https://thetvdb.com/search?menu%5Btype%5D=list&query={{ item.title | urlencode }}
    # imdb: https://www.imdb.com/find/?s=tt{% if item.subtype == 'movie' %}&ttype=ft{% elif item.subtype == 'show' %}&ttype=tv{% endif %}&q={{ item.title | urlencode }}
    # trakt: https://trakt.tv/search/lists?query={{ item.title | urlencode }}
    {% if item.childCount != 1 %}# {% endif %}collection_mode: hide
    # trakt_list:
    #  - 
